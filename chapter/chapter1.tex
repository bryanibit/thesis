\chapter{绪论}
\section{研究背景与意义}
近年来智能移动机器人变得越来越普及，这些智能化的移动机器人可以独立或辅助人类完成很多任务，这依赖其对环境的感知、导航和运动规划等过程。作为轮式移动机器人，地面无人车辆在未知区域导航时，对感知、规划等的要求非常高，所以一般的无人车辆都依赖详细的地图进行导航规划\cite{Mattyus-Enhancing-road-maps}，完成既定任务。而易于获取的卫星图像，由于更新不及时，室内无法使用，精度难以满足车道线级别的精度要求等原因一般不被导航精度较高的无人地面车辆采用。目前移动机器人领域的构建高精度地图方法较多，一般采用其自身车载传感器等设备，总体上可以分为基于摄像头和基于激光雷达两种方案。

实时定位与地图构建(SLAM,Simultaneous Localization and Mapping)作为移动机器人构建地图的方法今年来获得长足发展，较为著名的有ORB-SLAM\cite{Mur-Artal-ORB-SLAM}，LSD-SLAM\cite{Engel-LSD-SLAM}，LOAM\cite{Zhang-LOAM}等，图~\ref{compare}是运用车载传感器得到SLAM地图，其中左图使用激光雷达，右图使用摄像头得到的三维地图。这种采用车载传感器的构图方法已经发展地较为成熟，但是运用车载传感器得到大范围地图仍有困难，例如车载传感器视野受限，易受遮挡，在灾区发生道路阻塞时，车辆无法行驶而无法采集道路信息，甚至使用车辆对所有道路遍历的方法效率低下。然而无人机飞行灵活，视野宽阔，可以高效地对地面拍摄并建立地理空间地图，为无人地面车辆行驶提供先验信息。

\begin{figure*}[!htbp]
	\centering
\subfigure{
	\includegraphics[width=2.5in]{chapter1/laser.png}}
\subfigure{
    \includegraphics[width=2.5in]{chapter1/camera.PNG}}
	\caption{高精度地图}
	\label{compare}
\end{figure*}

与视觉SLAM类似，SfM(Structure from Motion)也是一种构建三维地形的技术，SfM能通过2D图像得到稠密3D 点云，然而SfM更多使用大量无序图片，运行过程不受时间限制，从而构建比SLAM更精确的3D地图。与传统的航空激光扫描(ALS,Airborne Laser Scanning)或者LiDAR(airbone light detectiona and ranging)绘制地图相比，SfM可以得到更高分辨率的包含空间纹理的3D模型，更重要的是SfM得到如此丰富的数据结果，使用的设备更廉价。这是由于SfM使用算法匹配图像特征点，计算相机位姿，从而重建拍摄场景的“稀疏”3D点云，通过MVS(Multi-View Stereo)将点云稠密化而后渲染，得到逼真的三维地理空间模型\cite{Carrivick-Structure-from-Motion}，基于此SfM 作为一种地形测绘技术被广泛应用于地理科学中。我们可以通过学术文献数据库Web of Knowledge观察SfM的学术研究情况，从20世纪80年代至2015年共有1000 条关于Structure from Motion主题的记录，其中属于计算机科学范畴的最多，地理科学位于第9名\cite{Carrivick-Structure-from-Motion}，如图~\ref{count-year}所示。

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=4.5in]{chapter1/count-year.png}
	\caption{SfM主题统计曲线图}
	\label{count-year}
\end{figure}

在无人地面车辆自主导航中，地图中的道路信息显得尤为重要，道路信息决定了无人车辆使用的规划模型和决策方案等，但是SfM构建的三维地图无法直接为无人驾驶导航规划。所以需要提取地图中的可通行区域，也就是道路区域，为无人地面车辆导航提供先验信息。近年来道路提取跟踪在无人车导航、地形分类等领域广泛应用，但这些算法针对无人车视角的图像取得良好的效果，然而对于俯视观察的地图这些算法基本失效。这是因为无人车辆的相机朝前安装，其视野中道路一般收敛为消失点，针对消失点的提取道路的方法在无法应用到大范围地图中。对于航拍地图中提取道路，需要分析道路区域的特征：

(1) 光谱特征：道路区域的光谱与大部分的非道路区域有着明显的不同，具体表现在道路区域的RGB通道值在三维空间的分布差异。

(2)	几何特征：道路区域常常是狭长的区域，道路宽度变化不会特别明显，而且道路的曲率也不会超过一定的限度。

(3)	辐射特征：在卫星影像图中选取窗口，只包含道路区域或者非道路区域时，因为其颜色比较均匀，灰度值的方差较小；而如果同时包含道路和非道路区域，则因为其光谱特征差异明显，灰度值的方差较大。

(4)	拓扑特征：一幅卫星影像图中的道路区域会呈现出一定的拓扑结构，并且会交叉形成结构化的道路网络，具有一定的拓扑特征。

目前，结构化道路网络的提取过程主要包括图像预处理、道路边缘提取、道路二值化、道路骨架提取等步骤。道路提取总体方案主要采用全自动或者半自动的方法，全自动方法不需要人工干预、速度较快，但是由于地图道路区域较为复杂，因此提取的效果欠佳；半自动的结构化道路提取\cite{Jianhua-Automated}将自动提取过程与人工干预相结合，在道路提取的初始时刻人工选取道路区域的初始点或者初始区域并进行迭代，或者加入人机交互，对通过自动的道路提取方法提取得到的道路网路进行后续的处理，完善自动提取得到的道路骨架；但与此同时，人机交互的部分降低了道路提取的效率。

采用SfM构建三维地理空间地图，为无人车未知区域导航提供先验信息，利用道路区域的特征，提取道路区域，通过提取的道路区域构建无人驾驶的拓扑网络，为无人驾驶路径规划导航服务。

\section{国内外研究现状}
\subsection{地图构建方法研究}
%国内国外 算法少 slam 飞机 车
构建适用于无人车辆行驶的地图是无人驾驶领域的关键技术之一，是进行路径规划与自主决策的重要信息源。许谦\cite{xuqian-wuren}利用3D激光雷达和摄像头获取无人车环境信息，将得到的环境感知质点与环境感知区域添加到GIS数据库中，实现基于GIS的地图动态更新的过程。宋晓虎\cite{songxiaohu-OSM}构建基于OpenStreetMap的电子导航地图，将SRTM高程数据巧妙添加在原始OSM地图信息中，实现多层平面金字塔图与多级别精度高程图合并的立体地图。国内发力自动驾驶领域的百度公司使用高精度地图车绘制高精度地图，为无人车自动自主驾驶服务，其使用高精度定位系统，结合高精度3D激光雷达绘制三维场景，并使用算法从激光点云中提取车道线，使高精度地图达到车道级别的精度，这种方法也被广大无人驾驶厂商采用，但是地图车价格昂贵，同时该方法不适合野外等条件的地图采集。

近年使用SLAM技术进行实时地图构建的方法被越来越多的无人驾驶研究机构采纳，李玉\cite{liyu-jiguagn} 使用车载3D激光雷达获得稠密点云信息，采用迭代最近点(Iterative Closest Points,ICP)算法求取相邻帧3D 点云的旋转平移关系，并评估得到的拼接点云中每个粒子的优劣，选择最优粒子加入全局地图，通过匹配拼接激光雷达数据获得地理空间的三维结构。段华旭\cite{duanfeixu-wuren}采用双目视觉基于ORB特征提取和BoW模型闭环检测的方法，对地理空间进行三维重构建，后端通过高斯-牛顿迭代法最小化三维场景的重投影误差，在优化重投影误差过程中考虑误差函数雅各比矩阵的稀疏性，从而加快整个优化过程。张毅\cite{zhangyi-wuren}围绕环境构图相关问题，提出了环境建图中基于粗集理论的数据融合算法，探索了构图过程中二维地图全新表示方法。邹智荣\cite{zhirong-dongtai}提出动态环境下自主车SLAM技术，针对大部分SLAM构图是基于静态环境完成的，本文提出了使用数据关联技术消除动态障碍干扰的方法，区分静动态障碍，本通过实验验证动态SLAM的有效性。

由于无人机的视角原因，无人机的地图构建更加灵活高效，谢斌\cite{xiebin-weizhihuanjing}提出使用无人机通过D-S证据理论在未知环境构建适航地图的方法，该方法有效提高无人机对地面目标跟踪的准确性。刘洋\cite{liuyang-sanwei}为解决无人机路径规划问题，提出改进概率地图模型，使用蚁群算法增加概率地图窄通道的采样点数量，获得可以覆盖规划环境的概率决策地图。陈含欣\cite{chenhanxin-wuren}采用自适应重采样FastSLAM算法，利用无人机进行视觉定位与3D 构图。蒙山\cite{mengshan-danmu}提出一种基于几何特征的视觉三维重建SfM方法，使用单目相机基于二维直线匹配生成三维空间直线，并通过点线特征结合及直线增强算法减少三维空间表达的冗余信息。马跃龙\cite{mayuelong-danmu}借助SLAM技术得到无人机航拍视频的关键帧的相机关系，据此得到关键帧之间的单应性关系，最后得到二维图像的拼接结果形成正摄投影地图。杨详红\cite{yangxianghong-wurenji}针对传统被动SLAM构图低效性，在SLAM中加入规划的思想，使构图更加高效。

国外研究在移动机器人地图构建领域起步较早，Leonard\cite{Leonard-concurrent}提出使用移动机器人再带传感器同时点位自身位置与构图的过程，实现大范围同时定位与构图。A Typiak使用SICK单线激光雷达，测斜仪，相机等传感器，通过多传感器信息融合构建地图，提高无人车远程控制的性能。Cole\cite{Cole-laser}使用3D激光雷达采集数据，使用简单的分割算法将点云分类并将点云转换到车体坐标系下，作者提出了一种新的点云配准算法，可以更鲁棒的将点云拼接为三维场景。Diosi\cite{Diosi-Interactive}使用激光雷达和声呐为移动机器人构图导航，人机交互被用来为地图加上语义特征，同时，使用Kalman滤波器融合雷达与声呐信息，创建带有语义特征的地图为机器人导航。近来随着计算机性能的提升，基于视觉的三维重建技术得到很大发展，使用网络上大量图片构建场景的三维结构中，Snavely\cite{Snavely-Photo}的工作对后来的研究者影响较大，Snavely设计了交互式可浏览和查看的图片的3D重建系统，拥有良好的用户体验，系统解决了网络图片相机模型、水印、清晰度、光线等的影响，完成场景建模得到稀疏点云图。著名的”一天里重建罗马“\cite{Snavely-Building}就是通过网络上不同类型的图片重建罗马的各个景观，使用并行计算的方法提高运行效率，一天内可处理超过15万张照片，图~\ref{buildRome}展示重建得到罗马三维结构。

\begin{figure*}[!htbp]
	\centering
    \subfigure{
	\includegraphics[width=2.5in]{chapter1/rome/rome_paper-09.png}}
    \subfigure{
	\includegraphics[width=2.5in]{chapter1/rome/rome_paper-10.png}}
    \subfigure{
	\includegraphics[width=2.5in]{chapter1/rome/rome_paper-23.png}}
    \subfigure{
	\includegraphics[width=2.5in]{chapter1/rome/rome_paper-24.png}}
	\caption{Building Rome in a day}
	\label{buildRome}
\end{figure*}

针对SfM耗时效率低的缺点，Wu Changchang\cite{wuchangchang-linear-time}提出线性时间的增量式SfM算法，针对增量式SfM时间复杂度$O(n^4)$，其中$n$为照片数量，提出了一种新的BA优化方法，同时兼顾速度与准确性，使时间复杂度降为$O(n)$。同时Wu Changchang\cite{wuchangchagn-multicore}为加速SfM 使用GPU优化BA过程，通过PCG改进BA，最大化使用CPU 进行并行计算等。

从以上研究现状可以看出构建地图的方法多种多样，甚至为满足机器人特别使用需要而构建的地图在其他机器人上无法使用，但是总体而言可以分为两类，一种是使用激光雷达构建三维场景，一种是使用双目视觉或单目视觉。3D激光雷达具有测距准确，精度高等特点，同时对点云分类算法的改进使，实时激光构图并对点云分类成为可能，但是激光雷达价格昂贵，制约了其大范围商业化应用。使用视觉方案，无论双目单目甚至三目基本原理相似，可以用于实时导航构图，但是想要稠密而精确的点云，类似图~\ref{buildRome}，一般需要离线处理，因为其中涉及到匹配优化问题很难再现有计算条件下完成。

\subsection{道路提取方法研究}
%国内 国外 遥感与航空
道路作为移动机器人导航规划的重要依据，无论事先提取道路添加到地图中作为机器人规划的先验信息，还是实时提取道路区域引导移动机器人导航，道路提取都是至关重要的。在这方面的研究很多，由于遥感图像视野开阔，包含信息丰富，使用遥感影像提取道路的研究很多，Wang Xia\cite{Xia-Road}采用了K-Means聚类方法对卫星图像进行分类，得到关于道路区域的二值图像；之后通过形态学的方法，基于拓扑细化的原理，对二值化图像进行处理，得到了道路骨架。汪夕明\cite{wang-yaogan}采用模糊C均值（Fuzzy C-Means，FCM）聚类的方法对卫星影像图进行二值化，对于图像中的交通干扰，采用形态学重构和Mean-Shift 方法加以去除，对于阴影部分采用HSV变换加以去除，实现了对有干扰图像的道路提取。小型航拍无人机易于获得，对于视野中的道路提取方法也很多，
\section{主要研究内容}
\subsection{二维与三维地图构建}
%二维三维地图的应用方式 三维重要性要多写 不能说现在没用，你没做不代表这没有用，三维能提供更多信息
\subsection{二维图像中的道路提取}

\section{本章小结}
